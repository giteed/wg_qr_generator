
# wg_qr_generator

**wg_qr_generator** – это система автоматизации управления WireGuard, включающая генерацию конфигураций, создание QR-кодов, управление пользователями и очистку устаревших данных.

---

## Основные возможности

- **Генерация конфигураций**: Автоматическое создание конфигурационных файлов и QR-кодов для пользователей.
- **Управление сроком действия**: Проверка, продление, сброс срока действия аккаунтов.
- **Удаление устаревших данных**: Автоматическое удаление просроченных аккаунтов, IP-адресов и QR-кодов.
- **Синхронизация конфигураций**: Интеграция с сервером WireGuard.

---

## Установка и настройка

### Быстрая установка с помощью `run_project.py`

Для удобной установки, настройки и управления проектом используйте скрипт `run_project.py`. Скрипт автоматически:

1. Проверяет наличие необходимых инструментов (`Git`, `Python 3.8+`).
2. Клонирует или обновляет проект из репозитория.
3. Создает и активирует виртуальное окружение.
4. Устанавливает зависимости.
5. Предлагает удобное меню для управления проектом.

### Шаги:

1. Убедитесь, что установлен **Python 3.8+** и **Git**.
2. Скачайте или клонируйте проект, чтобы получить скрипт `run_project.py`:
   ```bash
   git clone https://github.com/licht8/wg_qr_generator.git
   cd wg_qr_generator
   ```
3. Сделайте скрипт исполняемым:
   ```bash
   chmod +x run_project.py
   ```
4. Запустите скрипт:
   ```bash
   ./run_project.py
   ```

### Что делает скрипт:

- Настраивает проект автоматически.
- После установки предлагает меню для выполнения действий:
  - Запуск тестов.
  - Генерация конфигураций пользователей.
  - Выход из программы.

---

## Структура проекта

- `main.py` – основной скрипт для генерации конфигураций.
- `cleanup.py` – удаление устаревших записей.
- `manage_expiry.py` – управление сроками действия аккаунтов.
- `modules/` – вспомогательные модули (работа с ключами, IP-адресами и QR-кодами).
- `tests/` – тесты для проверки корректности работы модулей.

---

## Использование

### Генерация новой конфигурации
Для создания конфигурации используйте меню или выполните команду:
```bash
python3 main.py <nickname>
```
Где `<nickname>` – имя нового пользователя.

### Управление сроком действия
Для проверки, продления или сброса срока действия:
```bash
python3 manage_expiry.py check <nickname>
python3 manage_expiry.py extend <nickname> <days>
python3 manage_expiry.py reset <nickname> --days <new_days>
```

### Очистка устаревших данных
Удалите устаревшие данные с помощью:
```bash
python3 cleanup.py
```

---

## Тестирование

Запуск тестов:
```bash
pytest
```
Тесты проверяют основные модули проекта. Используйте меню в `run_project.py` для запуска тестов, если не хотите выполнять команды вручную.

---

## Лицензия

Проект распространяется под лицензией [MIT](LICENSE).

---

## Контакты

Если у вас есть вопросы или предложения, свяжитесь с нами через [Issues](https://github.com/licht8/wg_qr_generator/issues).
