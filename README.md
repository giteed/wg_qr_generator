# wg_qr_generator

**wg_qr_generator** – это система автоматизации управления WireGuard, включающая генерацию конфигураций, создание QR-кодов, управление пользователями и очистку устаревших данных.

---

## Основные возможности

- **Генерация конфигураций**: Автоматическое создание конфигурационных файлов и QR-кодов для пользователей.
- **Управление сроком действия**: Проверка, продление, сброс срока действия аккаунтов.
- **Удаление устаревших данных**: Автоматическое удаление просроченных аккаунтов, IP-адресов и QR-кодов.
- **Синхронизация конфигураций**: Интеграция с сервером WireGuard.

---

## Требования

Перед установкой убедитесь, что в системе установлены:
1. **Python 3.8+** (рекомендуется Python 3.11).
2. **Git** для клонирования репозитория.

### Установка Python и Git на CentOS Stream 8

Для установки Python и Git выполните команду:
```bash
sudo dnf update -y && sudo dnf install epel-release -y && sudo dnf install git gcc curl openssl-devel bzip2-devel libffi-devel zlib-devel -y && sudo dnf install python3.11 -y && python3 --version
```

Эта команда:
- Обновляет систему.
- Устанавливает необходимые зависимости.
- Устанавливает Python 3.11 и Git.

---

## Установка и запуск проекта

### Быстрая установка

Для установки, настройки и запуска проекта выполните следующую команду:
```bash
mkdir -p pyWGgen && cd pyWGgen && wget https://raw.githubusercontent.com/licht8/wg_qr_generator/refs/heads/main/run_project.sh && chmod +x run_project.sh && ./run_project.sh
```

### Что делает эта команда:
1. Создает директорию `pyWGgen` и переходит в нее.
2. Скачивает скрипт `run_project.sh` из репозитория.
3. Делает скрипт `run_project.sh` исполняемым.
4. Запускает скрипт, который:
   - Проверяет наличие Python и Git.
   - Создает виртуальное окружение и устанавливает зависимости.
   - Предлагает меню для работы с проектом.

---

## Использование меню

После запуска `run_project.sh` вы получите удобное меню:

1. **Запуск тестов**: Проверяет основные модули проекта.
2. **Генерация конфигураций**: Создает новые конфигурации для пользователей.
3. **Установка WireGuard**: Устанавливает WireGuard с помощью `wireguard-install.sh`.
4. **Выход**: Завершает работу программы.

Пример запуска:
- Для тестов:
  ```
  pytest
  ```
- Для генерации конфигурации:
  ```
  python3 main.py <nickname>
  ```

---

## Структура проекта

- `main.py` – основной скрипт для генерации конфигураций.
- `cleanup.py` – удаление устаревших записей.
- `manage_expiry.py` – управление сроками действия аккаунтов.
- `modules/` – вспомогательные модули (работа с ключами, IP-адресами и QR-кодами).
- `tests/` – тесты для проверки корректности работы модулей.

---

## Тестирование

Запуск тестов через меню или командой:
```bash
pytest
```

---

## Лицензия

Проект распространяется под лицензией [MIT](LICENSE).

---

## Контакты

Если у вас есть вопросы или предложения, свяжитесь с нами через [Issues](https://github.com/licht8/wg_qr_generator/issues).
